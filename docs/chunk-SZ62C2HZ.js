import{a as B}from"./chunk-P2E3ICGX.js";import{$ as a,$b as V,A as c,B as g,Eb as E,Fa as k,Ga as I,Ib as L,K as m,Ka as T,Lb as W,Mb as O,N as y,Nb as D,P as M,T as A,_,aa as n,ab as x,bc as F,cb as v,fa as S,ga as p,ha as h,kb as P,sa as d,ta as b,wa as u,xa as f,ya as w}from"./chunk-BPOHZ7UP.js";import"./chunk-TL5KAYV2.js";import"./chunk-XTA6VOZK.js";import"./chunk-ALL2FOAL.js";import"./chunk-7HDUECN2.js";import"./chunk-I3XFR2VW.js";import"./chunk-J7JKH43X.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-4YRHGV2P.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import"./chunk-VBFW7A5V.js";function N(l,r){if(l&1){let o=S();a(0,"ion-item")(1,"ion-checkbox",9),w("ngModelChange",function(i){let e=c(o).$implicit;return f(e.enabled,i)||(e.enabled=i),g(i)}),p("ionChange",function(){let i=c(o).$implicit,e=h(2);return g(e.toggleAlarm(i))}),n(),a(2,"ion-label",10)(3,"h2"),d(4),n(),a(5,"p"),d(6),n()(),a(7,"ion-button",11),p("click",function(){let i=c(o).$implicit,e=h(2);return g(e.deleteAlarm(i.id))}),d(8," Delete "),n()()}if(l&2){let o=r.$implicit;m(),u("ngModel",o.enabled),m(3),b(o.time),m(2),b(o.label)}}function H(l,r){if(l&1&&(a(0,"ion-list"),A(1,N,9,3,"ion-item",8),n()),l&2){let o=h();m(),_("ngForOf",o.alarms)}}var K=(()=>{let r=class r{constructor(t){this.headerService=t,this.alarms=[],this.newAlarmTime="",this.newAlarmLabel=""}ngOnInit(){this.headerService.updateHeaderData({title:"Alarm",subtitle:"Set wake-up alarms",image:"alarm",imageType:"icon",showBack:!0,showMenu:!0,backNavigationUrl:"/workspace/clock"}),this.startChecking()}ngOnDestroy(){this.checkInterval&&clearInterval(this.checkInterval)}addAlarm(){this.newAlarmTime&&(this.alarms.push({id:Date.now(),time:this.newAlarmTime,label:this.newAlarmLabel||"Alarm",enabled:!0}),this.newAlarmTime="",this.newAlarmLabel="")}deleteAlarm(t){this.alarms=this.alarms.filter(i=>i.id!==t)}toggleAlarm(t){t.enabled=!t.enabled}startChecking(){this.checkInterval=setInterval(()=>{let t=new Date,i=`${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}`;this.alarms.forEach(e=>{e.enabled&&e.time===i&&this.triggerAlarm(e)})},1e3)}triggerAlarm(t){alert(`\u23F0 ${t.label} - ${t.time}`),t.enabled=!1}};r.\u0275fac=function(i){return new(i||r)(y(B))},r.\u0275cmp=M({type:r,selectors:[["app-alarm"]],decls:14,vars:4,consts:[[1,"ion-padding"],[1,"alarm-container"],[1,"add-alarm"],["position","stacked"],["type","time",3,"ngModelChange","ngModel"],["placeholder","Alarm",3,"ngModelChange","ngModel"],["color","primary",3,"click","disabled"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"ngModelChange","ionChange","ngModel"],[1,"ion-margin-start"],["fill","clear","color","danger",3,"click"]],template:function(i,e){i&1&&(a(0,"ion-content",0)(1,"div",1)(2,"div",2)(3,"ion-item")(4,"ion-label",3),d(5,"Time"),n(),a(6,"ion-input",4),w("ngModelChange",function(s){return f(e.newAlarmTime,s)||(e.newAlarmTime=s),s}),n()(),a(7,"ion-item")(8,"ion-label",3),d(9,"Label"),n(),a(10,"ion-input",5),w("ngModelChange",function(s){return f(e.newAlarmLabel,s)||(e.newAlarmLabel=s),s}),n()(),a(11,"ion-button",6),p("click",function(){return e.addAlarm()}),d(12," Add Alarm "),n()(),A(13,H,2,1,"ion-list",7),n()()),i&2&&(m(6),u("ngModel",e.newAlarmTime),m(4),u("ngModel",e.newAlarmLabel),m(),_("disabled",!e.newAlarmTime),m(2),_("ngIf",e.alarms.length>0))},dependencies:[T,k,I,P,x,v,L,E,F,W,O,D,V],styles:[".alarm-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.add-alarm[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}ion-item[_ngcontent-%COMP%]{--padding-start: 0}"]});let l=r;return l})();export{K as AlarmPage};
